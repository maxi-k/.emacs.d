#+TITLE: Setup C
#+DESCRIPTION: Setup C mode and C-specific settings
#+AUTHOR: Maximilian Kuschewski
#+PROPERTY: my-file-type emacs-config-package

* Settings
** Coding-Style
Set the style to the linux kernel coding style.
#+begin_src emacs-lisp
;; Or not
(setq c-default-style "linux"
      c-basic-offset 2)
#+end_src
* :use-package ccls
[[https://github.com/MaskRay/ccls][ccls]] is a c++ language server, and there is an emacs plugin for it.
** :ensure t
** :config
Tell ccls-mode where the ccls executable is.
#+begin_src emacs-lisp
(setq ccls-executable "/usr/local/bin/ccls")
#+end_src

Set the flycheck options correctly.
#+begin_src emacs-lisp
(setq lsp-prefer-flymake nil)
(setq-default flycheck-disabled-checkers '(c/c++-clang c/c++-cppcheck c/c++-gcc))
#+end_src

Bind some keys
#+begin_src emacs-lisp

#+end_src
** :hook
#+begin_src emacs-lisp
  ((c-mode c++-mode objc-mode) . (lambda () (require 'ccls) (lsp)))
#+end_src

* Provide it
#+begin_src emacs-lisp
(provide 'setup-c)
#+end_src
